<div class="panel-header">
  <h2>Admin Dashboard</h2>
</div>

<div class="content-scroll-area admin-forms">

  <div class="admin-section">
    <h3>Bulk Upload Cands (JSON) <button id="toggle-json-sample" class="link-btn">Show Sample</button></h3>
    <p>This will <strong>delete all existing</strong> canned responses and replace them with the content of the file.</p>

    <div id="json-sample" style="display: none;">
      <pre class="code-block">
{
  "categories": [
    {
      "title": "Category Title",
      "templates": [
        {
          "tags": ["tag1", "tag2"],
          "text": "This is the first canned response text."
        },
        {
          "tags": ["tag1", "tag3"],
          "text": "This is the second canned response text."
        }
      ]
    },
    {
      "title": "Category Title Two",
      "templates": [
        {
          "tags": ["tag4"],
          "text": "Another response in a different category."
        }
      ]
    }
  ]
}
      </pre>
    </div>

    <form id="bulk-upload-form" enctype="multipart/form-data">
      <input type="file" name="jsonFile" id="jsonFile" accept=".json" required>
      <button type="submit" class="action-btn">Upload and Reset</button>
    </form>
  </div>

  <div class="admin-section">
    <h3>Bulk Create Users</h3>
    <p>Enter usernames, one per line. Initial password will equal username.</p>
    <form id="bulk-user-form">
      <textarea id="bulk-usernames" rows="5" placeholder="user1&#10;user2&#10;user3"></textarea>
      <button type="submit" class="action-btn">Create Users</button>
    </form>

    <div id="bulk-user-results" class="results-box" style="display:none;margin-top:8px;">
      <div style="display:flex;align-items:center;gap:8px;">
        <h4 style="margin:0">Generated Credentials</h4>
        <button id="copy-creds-btn" class="action-btn">Copy All</button>
      </div>
      <pre id="new-creds-output" style="white-space:pre-wrap;"></pre>
    </div>
  </div>

  <div class="admin-section">
    <h3>User Management</h3>
    <p>Manage user accounts (Admin only).</p>

    <div class="user-controls" style="display:flex;gap:10px;align-items:center;margin-bottom:12px;">
      <button id="refreshUsersBtn" class="action-btn">Refresh Users</button>
      <button id="refreshLogsBtn" class="action-btn">Refresh Logs</button>
      <button id="cleanupLogsBtn" class="action-btn">Cleanup Logs</button>
      <div style="margin-left:auto">
        <input id="admin-user-search" type="search" placeholder="Filter users..." style="padding:6px;border-radius:6px;border:1px solid #ddd">
      </div>
    </div>

    <div id="admin-users-container" class="panel" style="padding:0;min-height:120px;">
      <table id="admin-users-table" style="width:100%;border-collapse:collapse;">
        <thead>
          <tr style="background:#fafafa">
            <th style="padding:8px;text-align:left">Username</th>
            <th style="padding:8px;text-align:left">Password</th>
            <th style="padding:8px;text-align:left">Role</th>
            <th style="padding:8px;text-align:left">Modified At</th>
            <th style="padding:8px;text-align:left">Actions</th>
          </tr>
        </thead>
        <tbody id="admin-users-table-body"></tbody>
      </table>
    </div>
  </div>

  <div class="admin-section">
    <h3>Logs</h3>
    <div id="log-list" class="panel" style="padding:12px;min-height:160px;">
      <p class="small">No logs loaded. Click "Refresh Logs" to fetch.</p>
    </div>
  </div>

</div>

<script src="/js/admin.js"></script>