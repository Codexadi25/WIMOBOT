<!DOCTYPE html>
<html lang="en">
    <title>WIMOBot - Tools | Dashboard</title>
<head>
    <%- include('partials/header') %>
</head>
<body>
    <div class="app-wrapper">
        <header class="top-bar">
            <h1>WIMO SupportHub</h1>
            <div class="search-container-modern">
                <input type="text" id="searchInput" placeholder="Search templates or tags...">
            </div>
            <div class="user-info">
                <span>Welcome, <strong><%= user.username %></strong>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                </span>
                <a href="/auth/logout" class="logout-btn">Logout</a>
            </div>
        </header>
        <main class="main-content">
            <div class="left-panel">
                <div class="tabs">
                    <button class="tab-link active" data-tab="Cands">Cands</button>
                    <button class="tab-link" data-tab="PNs">Private Notes</button>
                    <% if (user.role === 'admin' || user.role === 'editor') { %>
                        <button class="tab-link" data-tab="Logger">Logger</button>
                    <% } %>
                    <% if (user.role === 'admin') { %>
                        <button class="tab-link" data-tab="Admin">Admin Panel</button>
                    <% } %>
                </div>
                
                <div id="Cands" class="tab-content active">
                    <%- include('partials/candPanel', { categories: categories, allTags: allTags }) %>
                </div>
                <div id="PNs" class="tab-content">
                    <%- include('partials/pnPanel', { privateNotes: privateNotes }) %>
                </div>
                <% if (user.role === 'admin' || user.role === 'editor') { %>
                <div id="Logger" class="tab-content">
                    <%- include('partials/loggerPanel') %>
                </div>
                <% } %>
                 <% if (user.role === 'admin') { %>
                <div id="Admin" class="tab-content">
                    <%- include('partials/adminPanel') %>
                </div>
                 <% } %>
            </div>

            <aside class="right-panel">
                 <%- include('partials/calculator') %>
            </aside>
        </main>

        <%- include('partials/footer') %>
    </div>
    
    <div id="form-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h3 id="modal-title">Modal Title</h3>
            <form id="modal-form">
                </form>
        </div>
    </div>
    <div id="toast-container"></div>
    <script src="/js/main.js"></script>
</body>
</html>